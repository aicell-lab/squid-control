[GENERAL]
# Squid+ Configuration for squid-control system
# Based on official Squid+ configuration with squid-control compatibility

# Camera Configuration
camera_type = Toupcam
_camera_type_options = [Default, FLIR, Toupcam, Hamamatsu]
main_camera_model = ITR3CMOS26000KMA
camera_sensor = IMX571
# Note: ITR3CMOS26000KMA uses IMX571 sensor with 3.76 Âµm pixel size
focus_camera_model = MER2-630-60U3M
focus_camera_type = Default
_focus_camera_type_options = [Default, FLIR, Toupcam]
focus_camera_exposure_time_ms = 0.8
pixel_size_adjustment_factor = 1

# Stage Movement Configuration
stage_movement_sign_x = 1
stage_movement_sign_y = 1
stage_movement_sign_z = -1
stage_movement_sign_theta = 1
stage_pos_sign_x = 1
stage_pos_sign_y = 1
stage_pos_sign_z = -1
stage_pos_sign_theta = 1

# Motor Configuration
fullsteps_per_rev_x = 200
fullsteps_per_rev_y = 200
fullsteps_per_rev_z = 200
fullsteps_per_rev_theta = 200
screw_pitch_x_mm = 2.54
screw_pitch_y_mm = 2.54
screw_pitch_z_mm = 0.3
microstepping_default_x = 16
microstepping_default_y = 16
microstepping_default_z = 16
microstepping_default_theta = 256

# Motor Current Settings
x_motor_rms_current_ma = 1000
y_motor_rms_current_ma = 1000
z_motor_rms_current_ma = 500
x_motor_i_hold = 0.25
y_motor_i_hold = 0.25
z_motor_i_hold = 0.5

# Movement Limits
max_velocity_x_mm = 30
max_velocity_y_mm = 30
max_velocity_z_mm = 3.8
max_acceleration_x_mm = 500
max_acceleration_y_mm = 500
max_acceleration_z_mm = 100

# Homing Configuration
homing_enabled_x = True
homing_enabled_y = True
homing_enabled_z = True

# Well Plate Configuration
wellplate_format = 96
_wellplate_format_options = [1536, 384, 96, 24, 12, 6]
x_mm_384_wellplate_upperleft = 12.41
y_mm_384_wellplate_upperleft = 11.18
wellplate_offset_x_mm = -0.1
wellplate_offset_y_mm = 0

# Autofocus Configuration
support_laser_autofocus = True
focus_measure_operator = GLVA
laser_af_spot_detection_mode = "dual_left"
_laser_af_spot_detection_mode_options = [single, dual_left, dual_right, multi_right, multi_second_right]

# NEW: Squid+ Specific Features
# Filter Wheel Control (W Axis Motor)
filter_controller_enable = True
_filter_controller_enable_options = [True, False]
SQUID_FILTERWHEEL_MIN_INDEX = 1
SQUID_FILTERWHEEL_MAX_INDEX = 8
SQUID_FILTERWHEEL_OFFSET = 0.008
SQUID_FILTERWHEEL_HOMING_ENABLED = True
SQUID_FILTERWHEEL_MOTORSLOTINDEX = 3
SQUID_FILTERWHEEL_TRANSITIONS_PER_REVOLUTION = 4000

# W Axis Configuration (Filter Wheel Motor)
SCREW_PITCH_W_MM = 1.0
MICROSTEPPING_DEFAULT_W = 64
FULLSTEPS_PER_REV_W = 200
STAGE_MOVEMENT_SIGN_W = 1
MAX_VELOCITY_W_mm = 10.0
MAX_ACCELERATION_W_mm = 50.0
W_MOTOR_RMS_CURRENT_mA = 500
W_MOTOR_I_HOLD = 0.5
HAS_ENCODER_W = False
ENCODER_FLIP_DIR_W = False
PID_P_W = 0
PID_I_W = 0
PID_D_W = 0
ENABLE_PID_W = False

# Objective Switcher (Xeryon)
USE_XERYON = True
XERYON_SERIAL_NUMBER = "24234303534351C03120"
XERYON_SPEED = 80
XERYON_OBJECTIVE_SWITCHER_POS_1 = ["20x"]
XERYON_OBJECTIVE_SWITCHER_POS_2 = ["4x"]
XERYON_OBJECTIVE_SWITCHER_POS_2_OFFSET_MM = 0.1

# Inverted Objective
inverted_objective = True
_inverted_objective_options = [True, False]

# Z Motor Configuration
Z_MOTOR_CONFIG = "STEPPER"
_Z_MOTOR_CONFIG_OPTIONS = ["STEPPER", "STEPPER + PIEZO", "PIEZO", "LINEAR"]

# Illumination Configuration
illumination_intensity_factor = 0.6
led_matrix_r_factor = 1.0
led_matrix_g_factor = 1.0
led_matrix_b_factor = 1.0

# Default Settings
default_saving_path = /home/squidplus1/reef_harddisk/squidplus1/
default_z_pos_mm = 5.4

# Optical Configuration
camera_pixel_size_um = {"IMX290":2.9,"IMX178":2.4,"IMX226":1.85,"IMX250":3.45,"IMX252":3.45,"IMX273":3.45,"IMX264":3.45,"IMX265":3.45,"IMX571":3.76,"PYTHON300":4.8}
objectives = {"2x":{"magnification":2, "NA":0.10, "tube_lens_f_mm":180},"4x":{"magnification":4, "NA":0.13, "tube_lens_f_mm":180}, "10x":{"magnification":10, "NA":0.25, "tube_lens_f_mm":180}, "10x (Mitutoyo)":{"magnification":10, "NA":0.25, "tube_lens_f_mm":200}, "20x (Boli)":{"magnification":20, "NA":0.4, "tube_lens_f_mm":180}, "20x (Nikon)":{"magnification":20, "NA":0.45, "tube_lens_f_mm":200}, "20x":{"magnification":20, "NA":0.4, "tube_lens_f_mm":180}, "40x":{"magnification":40, "NA":0.6, "tube_lens_f_mm":180}}
tube_lens_mm = 180
default_objective = 20x
_default_objective_options = [2x,4x,10x,10x (Mitutoyo), 20x (Boli), 20x (Nikon), 20x, 40x]
controller_version = Teensy

# Software Limits
x_positive = 115
x_negative = 5
y_positive = 76
y_negative = 4
z_positive = 6
z_negative = 0.05

[LIMIT_SWITCH_POLARITY]
x_home = 1
y_home = 1
z_home = 0

[PLATE_READER]
number_of_rows = 8
number_of_columns = 12
row_spacing_mm = 9
column_spacing_mm = 9
offset_column_1_mm = 20
offset_row_a_mm = 20

[AF]
stop_threshold = 0.85
crop_width = 800
crop_height = 800

[ACQUISITION]
number_of_fovs_per_af = 3
image_format = bmp
image_display_scaling_factor = 0.85
dx = 0.9
dy = 0.9
dz = 1.5
crop_width = 2084
crop_height = 2084

[SLIDE_POSITION]
loading_x_mm = 0.5
loading_y_mm = 0.5
scanning_x_mm = 20
scanning_y_mm = 20

[CAMERA_CONFIG]
roi_offset_x_default = 0
roi_offset_y_default = 0
roi_width_default = 6208
roi_height_default = 4168
crop_width_unbinned = 4168
crop_height_unbinned = 4168
binning_factor_default = 1
pixel_format_default = MONO16
_default_pixel_format_options = [MONO8, MONO12, MONO14, MONO16, BAYER_RG8, BAYER_RG12]
temperature_default = 20
fan_speed_default = 1
blacklevel_value_default = 3

[OUTPUT_GAINS]
refdiv = False
_refdiv_options = [True, False]
channel0_gain = False
channel1_gain = False
channel2_gain = False
channel3_gain = False
channel4_gain = False
channel5_gain = False
channel6_gain = False
channel7_gain = True
